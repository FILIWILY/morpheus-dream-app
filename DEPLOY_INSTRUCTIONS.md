# üöÄ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑:
```bash
cd ~/DI
chmod +x deploy.sh redeploy.sh
```

### –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ):
```bash
./deploy.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `TELEGRAM_WEB_APP_URL` –¥–ª—è cache busting
2. ‚úÖ –î–µ–ª–∞–µ—Ç `git pull`
3. ‚úÖ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ Docker –æ–±—Ä–∞–∑—ã
4. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ë–î –∏ Whisper –º–æ–¥–µ–ª—å

**–í—Ä–µ–º—è:** 5-10 –º–∏–Ω—É—Ç + 2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤ Whisper

---

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (—É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ):
```bash
./redeploy.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `TELEGRAM_WEB_APP_URL` –¥–ª—è cache busting
2. ‚úÖ –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volumes (–≤–∫–ª—é—á–∞—è –ë–î)
3. ‚úÖ –î–µ–ª–∞–µ—Ç `git pull`
4. ‚úÖ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ Docker –æ–±—Ä–∞–∑—ã
5. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å —á–∏—Å—Ç–æ–π –ë–î

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!

**–í—Ä–µ–º—è:** 5-10 –º–∏–Ω—É—Ç + 3-6 –º–∏–Ω—É—Ç –Ω–∞ –ø–µ—Ä–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É Whisper –º–æ–¥–µ–ª–∏

---

## üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏):
```bash
docker-compose restart
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å—ë
docker-compose up -d --build

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose up -d --build backend
docker-compose up -d --build frontend
```

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è Whisper –∫—ç—à–∞):
```bash
docker-compose down
docker volume rm di_postgres_data
docker-compose up -d --build
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤:
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose logs backend -f --tail=50

# –¢–æ–ª—å–∫–æ whisper
docker-compose logs whisper -f --tail=20
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
docker-compose ps
```

---

## ‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (Whisper small)

- **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ `docker-compose up`:** 10-15 —Å–µ–∫ (—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞)
- **–ü–µ—Ä–≤—ã–π –∞—É–¥–∏–æ-–∑–∞–ø—Ä–æ—Å (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏):** 3-6 –º–∏–Ω—É—Ç
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:** 10-15 —Å–µ–∫—É–Ω–¥ (–º–æ–¥–µ–ª—å –∏–∑ –∫—ç—à–∞)

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 413 –Ω–∞ –ø—Ä–æ–¥–µ

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –£ –Ω–∞—Å **–î–í–ê Nginx** (—Å–º. `ReadMe/nginx.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π):

1. **üîµ External Nginx** (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ) - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –í–†–£–ß–ù–£–Æ
2. **üü¢ Internal Nginx** (–≤ Docker) - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—à—å –æ—à–∏–±–∫—É **413 Request Entity Too Large** –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ:

```bash
# 1. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥ –≤–Ω–µ—à–Ω–µ–≥–æ Nginx
sudo nano /etc/nginx/sites-enabled/dream-interpretation.ru

# 2. –ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É "server_name dream-interpretation.ru..."
# 3. –î–æ–±–∞–≤—å –ü–û–°–õ–ï –Ω–µ—ë:
client_max_body_size 50M;

# 4. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏
sudo nginx -t
sudo systemctl reload nginx
```

**–ü–æ–ª–Ω–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –°–º. `ReadMe/nginx.md` ‚Üí —Å–µ–∫—Ü–∏—è "–ü–û–õ–ù–ê–Ø –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø"

---

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

1. –ü–æ–ª—É—á–∏ —Å–≤–æ–π Telegram ID: [@userinfobot](https://t.me/userinfobot)
2. –î–æ–±–∞–≤—å –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ADMIN_ID=280186359
```
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ backend:
```bash
docker compose up -d --build backend
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö (5xx) –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram!

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [PRODUCTION_DEPLOYMENT.md](ReadMe/PRODUCTION_DEPLOYMENT.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- üìñ [example.env.md](ReadMe/example.env.md) - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- üìñ [WHISPER_INTEGRATION.md](ReadMe/WHISPER_INTEGRATION.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Whisper

